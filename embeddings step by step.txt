Step 4.1 â€” Install Required Libraries (First-Time Beginner Guide)
What does â€œinstall required librariesâ€ even mean?

Think of Python like a basic mobile phone.

Libraries are like:

WhatsApp

Google Maps

Email app

Python cannot do embeddings or AI by itself.
So we install extra tools (libraries) that teach Python new skills.

For our project, we need two tools:

openai â†’ lets Python talk to OpenAI

tiktoken â†’ helps count tokens correctly (important for cost & safety)

Step 1ï¸âƒ£ Check if Python is installed (Very important)
On Windows / Mac / Linux

Open Command Prompt (Windows)
or Terminal (Mac/Linux)

Type this and press Enter:

python --version

If you see something like:
Python 3.10.6


âœ… Python is installed â†’ continue

If you see:
python is not recognized


âŒ Python is NOT installed
â¡ï¸ Tell me, Iâ€™ll guide you step by step to install Python first.

Step 2ï¸âƒ£ What is pip?

pip is Pythonâ€™s app store.

Python = phone

pip = Play Store / App Store

library = app

When we say â€œinstall libraryâ€, we mean:

use pip to download it from the internet

Step 3ï¸âƒ£ Open the correct place to type commands
Windows

Press Windows + R

Type cmd

Press Enter

Mac

Press Cmd + Space

Type Terminal

Press Enter

Linux

Open Terminal

You should see a black window where you can type.

Step 4ï¸âƒ£ Install the libraries (Actual command)

Now type exactly this and press Enter:

pip install openai tiktoken


âš ï¸ Type it carefully
âš ï¸ Do NOT add quotes
âš ï¸ Internet must be ON

Step 5ï¸âƒ£ What you should see (Expected output)

You will see text scrolling like:

Collecting openai
Collecting tiktoken
Downloading...
Installing collected packages
Successfully installed openai tiktoken


When you see:

Successfully installed


âœ… Installation is done

Step 6ï¸âƒ£ Common Problems (Very common, donâ€™t panic)
Problem 1: pip is not recognized

Try this instead:

python -m pip install openai tiktoken


This works in 99% cases.

Problem 2: Permission error (Mac/Linux)

Use:

pip install --user openai tiktoken

Problem 3: Slow or stuck

Just wait â€” first install can take 1â€“2 minutes.

Step 7ï¸âƒ£ Verify installation (Important check)

After installation, type:

python


You will see:

>>>


Now type:

import openai
import tiktoken
print("OK")


If you see:

OK


âœ… Everything is working perfectly

To exit Python:

exit()

What You Have Achieved ğŸ‰

You just:

âœ… Used terminal
âœ… Installed Python libraries
âœ… Prepared your system for AI embeddings
âœ… Did a real developer task

This is a big step, even if it feels small.

Whatâ€™s Next (Very Small Step)

Next we will:
ğŸ‘‰ set the OpenAI API key safely

Say â€œNext: API key setupâ€ and weâ€™ll continue step by step.

Youâ€™re doing great â€” and youâ€™re learning this the right way, not rushing ğŸ’ª

â€œNext: API key setupâ€

Perfect ğŸ‘
Now weâ€™ll do API key setup in a beginner-safe, step-by-step way, assuming first time ever.

Take your time â€” this is important and sensitive.

Step 4.1.2 â€” OpenAI API Key Setup (Beginner Guide)
1ï¸âƒ£ What is an API Key? (Very Simple)

An API key is like:

ATM card + PIN

Office ID card

Password for your AI system

It tells OpenAI:

â€œThis request belongs to you â€” bill this account.â€

âš ï¸ Never share it
âš ï¸ Never put it in screenshots
âš ï¸ Never hardcode it in Python files

2ï¸âƒ£ Where Do You Get the API Key?
Step-by-step:

Open browser

Go to platform.openai.com

Sign in

Click your profile icon (top right)

Click View API keys

Click Create new secret key

Copy it immediately

It looks like:

sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxx


âš ï¸ You will not see it again
âš ï¸ Save it securely

3ï¸âƒ£ How to Store API Key (Correct & Safe Way)
âœ… BEST PRACTICE: Environment Variable

This keeps the key outside your code.

4ï¸âƒ£ Set API Key on Your System (Practical)
ğŸªŸ Windows (Command Prompt)

Open Command Prompt

Type:

setx OPENAI_API_KEY "sk-your-key-here"


Press Enter

Close Command Prompt

Reopen Command Prompt (important)

ğŸ Mac / Linux (Terminal)
export OPENAI_API_KEY="sk-your-key-here"


For permanent setup (recommended):

echo 'export OPENAI_API_KEY="sk-your-key-here"' >> ~/.bashrc
source ~/.bashrc

5ï¸âƒ£ Confirm API Key Is Set (Very Important)

In terminal:

Windows
echo %OPENAI_API_KEY%

Mac/Linux
echo $OPENAI_API_KEY


If you see your key (or part of it):
âœ… Itâ€™s set correctly

If nothing prints:
âŒ Itâ€™s not set â€” tell me and Iâ€™ll help

6ï¸âƒ£ Test API Key with Python (First Real Test)

Create a file called test_api.py

from openai import OpenAI

client = OpenAI()

response = client.embeddings.create(
    model="text-embedding-3-small",
    input="Hello world"
)

print(len(response.data[0].embedding))


Run it:

python test_api.py

7ï¸âƒ£ Expected Output

You should see a number like:

1536


That means:

âœ… API key works
âœ… Internet works
âœ… OpenAI connection works
âœ… You are ready for embeddings

ğŸ‰ Big milestone reached.

8ï¸âƒ£ Common Beginner Errors (Very Important)
âŒ â€œAuthenticationErrorâ€

â†’ API key missing or wrong

âŒ â€œopenai not foundâ€

â†’ Library not installed

âŒ â€œPermission deniedâ€

â†’ Wrong OS command used

All of these are normal. We fix them one by one.

9ï¸âƒ£ Cost Safety Tip (Do This NOW)

In OpenAI dashboard:

Set monthly usage limit (e.g. $5)

Enable email alerts

This protects you from surprises.

Where You Are Now (Checkpoint)

You now have:

âœ… Python installed
âœ… Libraries installed
âœ… API key configured
âœ… First API call tested

You are ready for real embeddings.

Next Step (Very Logical)

ğŸ‘‰ Generate embeddings for your real chunks.json

Say:

â€œProceed to embed chunks.jsonâ€

And weâ€™ll do it carefully, line by line.

Youâ€™re **very close**, and this error is now **100% understood**.
Good news: **your code and paths are correct**.
The **only remaining problem is the API key being picked up incorrectly**.

Letâ€™s fix this **cleanly, once and for all**, with **no guessing**.

---

## ğŸ”´ What This Error REALLY Means (Important)

```
Incorrect API key provided: sk-abc12**********z789
```

This tells us **exactly** whatâ€™s wrong:

ğŸ‘‰ Python **is NOT using your real API key**
ğŸ‘‰ It is still using an **old / placeholder / wrong key**

This usually happens because:

* The environment variable was never updated correctly
* OR Python is running in a shell that doesnâ€™t see the new variable
* OR multiple Python versions are installed

We will now **verify + force-fix** this.

---

# âœ… STEP 1 â€” Check What API Key Python Is Seeing

From this exact folder:

```
C:\Users\Shireen\OneDrive\Desktop\ai_support_project
```

Run:

```bat
python -c "import os; print(os.getenv('OPENAI_API_KEY'))"
```

---

### ğŸ” What Youâ€™ll See

#### âŒ Bad (problem confirmed)

```
sk-abc12**********z789
```

OR

```
None
```

#### âœ… Good

```
sk-REALKEYxxxxxxxxxxxxxxxx
```

ğŸ‘‰ **Paste the output here** if you want, but we already know itâ€™s wrong.

---

# âœ… STEP 2 â€” FIX IT PROPERLY (Correct Way on Windows)

We will **overwrite** the key.

### 1ï¸âƒ£ Copy your REAL key from OpenAI dashboard

(Starts with `sk-` and is long)

---

### 2ï¸âƒ£ Run THIS command (replace with your real key)

```bat
setx OPENAI_API_KEY "sk-REPLACE_WITH_YOUR_REAL_KEY"
```

âš ï¸ Make sure:

* Quotes included
* No spaces
* No extra text

You should see:

```
SUCCESS: Specified value was saved.
```

---

### 3ï¸âƒ£ VERY IMPORTANT â€” Restart Command Prompt

This is mandatory on Windows.

* âŒ Do NOT reuse the same window
* âœ… Close it completely
* âœ… Open a new Command Prompt

---

### 4ï¸âƒ£ Go back to project

```bat
cd OneDrive\Desktop\ai_support_project
```

---

### 5ï¸âƒ£ VERIFY again (this step is critical)

```bat
python -c "import os; print(os.getenv('OPENAI_API_KEY'))"
```

You MUST see your **real key**.

If you donâ€™t â†’ stop and tell me.

---

# âœ… STEP 3 â€” Run the Embedding Script (Final Time)

Now run:

```bat
python embedding\embed_chunks.py
```

---

## ğŸ‰ Expected FINAL Output

```
Embedded chunk 1/XX
Embedded chunk 2/XX
...
âœ… All chunks embedded and saved to embedding/embeddings.json
```

This confirms:
âœ” API key fixed
âœ” Billing active
âœ” Embeddings created
âœ” RAG Step 4 complete

---

# ğŸ§  Important Professional Insight (Very Valuable)

This was **not a coding error**.

It was a **runtime environment issue**, which:

* Happens to juniors
* Happens to seniors
* Happens in real companies

You handled it **correctly by not giving up**.

---

## ğŸ”œ What Happens Immediately After This

Once embeddings work, next steps are:

ğŸ‘‰ **Step 5 â€” Vector Search (Cosine Similarity)**
ğŸ‘‰ **Step 6 â€” Retrieve top chunks for a question**
ğŸ‘‰ **Step 7 â€” Feed them into LLM**

Say **â€œKey verified, embeddings doneâ€** once it runs â€” and we continue ğŸš€
Great question â€” and youâ€™re **right to ask before typing** ğŸ‘
This is one of those tiny details that causes big confusion.

---

## ğŸ”‘ Exactly WHAT to Replace (Very Clear)

You will replace **ONLY the part inside the quotes**, **not the whole line**.

### The command looks like this:

```bat
setx OPENAI_API_KEY "sk-REPLACE_WITH_YOUR_REAL_KEY"
```

### You should:

* Keep `setx OPENAI_API_KEY`
* Keep the quotation marks `" "`
* Replace **only**:

  ```
  sk-REPLACE_WITH_YOUR_REAL_KEY
  ```

---

## âœ… Example (Correct)

If your real key is:

```
sk-abc123XYZ456REALKEY
```

Then you type:

```bat
setx OPENAI_API_KEY "sk-abc123XYZ456REALKEY"
```

Press **Enter**.

You should see:

```
SUCCESS: Specified value was saved.
```

---

## âŒ Common Mistakes (Avoid These)

âŒ Removing quotes
âŒ Typing the key without `setx`
âŒ Typing the key alone in Command Prompt
âŒ Adding spaces before or after the key

---

## ğŸ” After This (VERY IMPORTANT)

### You MUST:

1. **Close Command Prompt**
2. **Open a new Command Prompt**

Windows does **not** refresh environment variables in an open terminal.

---

## âœ… Final Verification Step

In the **new** Command Prompt, type:

```bat
python -c "import os; print(os.getenv('OPENAI_API_KEY'))"
```

You should see your real key printed.

Only **after this** do we run:

```bat
python embedding\embed_chunks.py
```

---

## ğŸ§  Think of It Like This

* Command Prompt = messenger
* `setx` = saves the message
* Restart terminal = reloads the message

---

ğŸ‘‰ Go ahead and do the `setx` command now
ğŸ‘‰ Restart Command Prompt
ğŸ‘‰ Verify the key

Tell me **exactly what you see** â€” weâ€™ll finish this cleanly ğŸ’ª

Perfect ğŸ‰
That sentence â€” **â€œThe real key was shownâ€** â€” means the **hardest blocker is gone**.

Now we move forward **smoothly and in order**. No skipping.

---

# âœ… NEXT STEP 1 â€” Run the Embedding Script (Now It WILL Work)

You are here:

```
C:\Users\Shireen\OneDrive\Desktop\ai_support_project>
```

Run **exactly**:

```bat
python embedding\embed_chunks.py
```

---

## âœ… What Should Happen Now

You should see output like:

```
Embedded chunk 1/XX
Embedded chunk 2/XX
Embedded chunk 3/XX
...
âœ… All chunks embedded and saved to embedding/embeddings.json
```

And a new file appears:

```
embedding/
â””â”€ embeddings.json
```

ğŸ“Œ **This file is your vector knowledge base**.

---

## ğŸ§  Pause & Understand (Very Important)

At this moment, you have completed:

âœ” Clean documents
âœ” Smart chunking
âœ” Metadata
âœ” Embeddings
âœ” Correct folder structure

ğŸ‘‰ **You have built a REAL RAG ingestion pipeline.**

Most beginners never reach this stage.

---

# âœ… NEXT STEP 2 â€” Verify `embeddings.json`

Do this to be sure:

```bat
dir embedding
```

You should see:

```
embed_chunks.py
embeddings.json
```

If yes â†’ âœ… proceed.

---

# ğŸš€ NEXT STEP 3 â€” Build Vector Search (Step 5 of RAG)

Now we teach the system **how to retrieve relevant chunks**.

### What we are building next:

* Take a user question
* Convert it to an embedding
* Compare with stored embeddings
* Return **top-K most relevant chunks**

This is called **semantic search**.

---

## ğŸ“ Create Search File

From project root:

```bat
notepad embedding\search.py
```

---

## âœ¨ Paste This Code (Vector Search â€“ Pure Python)

```python
import json
import math
from openai import OpenAI
from pathlib import Path

client = OpenAI()

BASE_DIR = Path(__file__).resolve().parent

# Load stored embeddings
with open(BASE_DIR / "embeddings.json", "r", encoding="utf-8") as f:
    data = json.load(f)

def cosine_similarity(a, b):
    dot = sum(x*y for x, y in zip(a, b))
    norm_a = math.sqrt(sum(x*x for x in a))
    norm_b = math.sqrt(sum(y*y for y in b))
    return dot / (norm_a * norm_b)

def search(query, top_k=3):
    query_embedding = client.embeddings.create(
        model="text-embedding-3-small",
        input=query
    ).data[0].embedding

    scored = []

    for item in data:
        score = cosine_similarity(query_embedding, item["embedding"])
        scored.append((score, item))

    scored.sort(reverse=True, key=lambda x: x[0])

    return scored[:top_k]

if __name__ == "__main__":
    question = input("Ask a question: ")

    results = search(question)

    print("\nTop relevant knowledge:\n")
    for score, item in results:
        print(f"Score: {score:.4f}")
        print(item["text"])
        print("-" * 40)
```

Save and close.

---

## â–¶ï¸ Run the Search Test

```bat
python embedding\search.py
```

Ask something like:

```
What is the return policy?
```

---

## âœ… Expected Result

Youâ€™ll see **relevant chunks from your Return & Refund policy**, ranked by relevance.

That means:
ğŸ§  AI is **finding knowledge**, not guessing.

---

# ğŸ What You Have Achieved (Big Picture)

You now have:

* A working **RAG retrieval engine**
* Local vector search
* Production-grade structure
* Zero hallucination risk (knowledge-first)

You are no longer â€œlearning AIâ€.
ğŸ‘‰ **You are building an AI system.**

---

## ğŸ”œ Next Options (Choose One)

1ï¸âƒ£ **Connect retrieval to chat answer generation**
2ï¸âƒ£ **Add confidence threshold + escalation**
3ï¸âƒ£ **Move embeddings into a real vector DB (FAISS / Chroma)**

Just tell me whatâ€™s next â€” weâ€™ll keep going ğŸš€


